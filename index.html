<!DOCTYPE HTML>
<html lang="en">
    <head>
        <title>Bat Cat - Steph and Kev's Wedding</title>
        <link rel="apple-touch-icon-precomposed" href="data/img/touch-icon-iphone.png"/>
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="data/img/touch-icon-iphone-retina.png"/>
        <link rel="shortcut icon" href="data/img/favicon.ico">
        <link rel="stylesheet" type="text/css" media="screen" href="index.css">
        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="Bat Cat">
        <meta charset="UTF-8" />
        <meta name="description" content="Bat Cat"/>
        <meta name="keywords" content="flappybird, flappy, bird, game, html5, melonjs,clone"/>
        <meta name="robots" content="index, follow">

        <meta property="og:title" content="Bat Cat"/>

        <meta property="og:site_name" content="Bat Cat - MelonJS"/>
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">

<style>
table {
    border-collapse: collapse;
    width:40%;
    text-align: center;
    padding-bottom: 20px;
}

table, th, td {
    border: 1px solid white;
}
.button {
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}
body{
  font-family: 'Source Sans Pro', sans-serif;
  background-color: #003c66 !important;

}
</style>

<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyC2arfd1XPZrggXv3POInBYW4PFc3VI4kE",
    authDomain: "bat-cat-470cd.firebaseapp.com",
    databaseURL: "https://bat-cat-470cd.firebaseio.com",
    projectId: "bat-cat-470cd",
    storageBucket: "bat-cat-470cd.appspot.com",
    messagingSenderId: "791992896980"
  };
  firebase.initializeApp(config);
</script>
<script type="text/javascript">
    function storeValues(form)
   {
    if(!localStorage.getItem('name')){
    localStorage.setItem('name', form.name.value);
    }
    var high_score = 0;
    if(localStorage.getItem('me.save.topSteps')){
      high_score = localStorage.getItem('me.save.topSteps');
    }

     firebase.database().ref('users/' + localStorage.getItem('name')).set({
       name: localStorage.getItem('name'),
       score: high_score,
       order: -high_score
     });
     console.log('got here, ' + form.name.value);
   }

   window.onload = function () {

        if (localStorage.getItem('name'))
            document.getElementById('name').style.display = 'none';
        else
            document.getElementById('name').style.display = 'block';

}

</script>

    </head>

    <body>
      <div id="form" align="center">
      <form id="name_form" action="#" onsubmit="storeValues(this);return true">
      <fieldset>
        <div id="name">
      <label>Name: </label><span><input type="text" size="32" name="name" value=""></span>
       </div>
      <input type="submit" class="button" value="Submit my high score!">
      </fieldset>
      </form>
    </div>




        <!-- Canvas placeholder -->
        <div id="screen"></div>
        <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>

        <!-- melonJS Library -->
        <script type="text/javascript" src="js/melonJS-min.js" ></script>
        <script type="text/javascript" src="build/clumsy-min.js" ></script>
        <script type="text/javascript">
            window.onReady(function onReady() {
                game.onload();
            });
        </script>

<div align="center">

<table id="ex-table">
<h2>Scoreboard</h2>
  <tr id="tr">

    <th>NAME</th>
    <th>SCORE</th>
 </table>

 </div>

<div align="center">
 <a href="http://stephandkev.com" class="button">Back to Steph and Kev's Wedding Website</a>
</div>
<script>
    firebase.database().ref('users/').orderByChild('order').limitToLast(10).on("value", function (snapshot) {
        if(snapshot.exists()){
            var content = '';
            snapshot.forEach(function(child){
                var val = child.val();
                content +='<tr>';
                content += '<td>' + val.name + '</td>';
                content += '<td>' + val.score + '</td>';
                content += '</tr>';
            });
            $('#ex-table').append(content);
        }
    });
</script>

    </body>
</html>
